<!DOCTYPE html>
{% load static %}
<html lang="en">

<head>
    
    <title>{% block title %}My Message Board{% endblock %}</title>
    <link rel="manifest" href="/static/manifest.json">
    <meta name="theme-color" content="{{ PWA_APP_THEME_COLOR }}">


    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/styles.css' %}">

    <!-- Button Hover Effects -->
    <style>
        .btn-primary {
            background-color: #FF1493;
            border-color: #FF1493;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .btn-primary:hover {
            background-color: #FFC0CB;
            border-color: #FFC0CB;
        }

        .btn-secondary {
            background-color: #1E90FF;
            border-color: #1E90FF;
            transition: background-color 0.3s ease, border-color 0.3s ease;
        }

        .btn-secondary:hover {
            background-color: #ADD8E6;
            border-color: #ADD8E6;
        }

        .dark-mode {
            background-color: #121212;
            color: #ffffff;
        }

        .dark-mode .navbar,
        .dark-mode .card {
            background-color: #333333;
            color: #ffffff;
        }

        .dark-mode .btn-primary {
            background-color: #bb86fc;
            border-color: #bb86fc;
        }
    </style>

    {% block extra_head %}{% endblock %}
</head>

<body>

    <!-- Dark Mode Toggle Button -->
    <div class="container mt-3">
        <button id="darkModeToggle" class="btn btn-secondary">Toggle Dark Mode</button>
    </div>

    <div class="container mt-3">
        {% block content %}{% endblock %}
    </div>
<nav class="navbar navbar-expand-lg navbar-dark">
        <div class="container-fluid">
            <a class="navbar-brand" href="{% url 'welcome' %}">Message Board</a>
            <div class="collapse navbar-collapse">
                <ul class="navbar-nav me-auto mb-2 mb-lg-0">
                    {% if user.is_authenticated %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'profile' user.username %}">Profile</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'create_post' %}">New Post</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'logout' %}">Logout</a></li>
                    {% else %}
                    <li class="nav-item"><a class="nav-link" href="{% url 'login' %}">Login</a></li>
                    <li class="nav-item"><a class="nav-link" href="{% url 'register' %}">Register</a></li>
                    {% endif %}
                </ul>
            </div>
        </div>
    </nav>

    <div class="container mt-4">
        
    </div>

    <footer>
        <p>&copy; 2024 Message Board | Built with ❤️ and Python</p>
    </footer>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Smooth Scroll for anchor links -->
    <script>
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function(e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
    </script>

    <!-- Form Validation using Bootstrap's built-in validation -->
    <script>
        (function() {
            'use strict';
            var forms = document.querySelectorAll('.needs-validation');
            Array.prototype.slice.call(forms).forEach(function(form) {
                form.addEventListener('submit', function(event) {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        })();
    </script>

    <!-- Auto-Dismiss Alerts after 3 seconds -->
    <script>
        window.setTimeout(function() {
            document.querySelectorAll(".alert").forEach(alert => {
                alert.classList.add('fade-out');
            });
        }, 3000);
    </script>

    <!-- Character Counter for Post Creation -->
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const textArea = document.getElementById('postContent');
            const charCount = document.getElementById('charCount');
            const maxChars = 500;

            textArea.addEventListener('input', () => {
                const remaining = maxChars - textArea.value.length;
                charCount.textContent = `${remaining} characters remaining`;
            });
        });
    </script>

    <!-- Modal Form Submission -->
    <script>
        document.getElementById('privateMessageForm').addEventListener('submit', function(event) {
            event.preventDefault();
            this.submit();
            $('#privateMessageModal').modal('hide');
        });
    </script>

    <!-- Dark Mode Toggle -->
    <script>
        const toggleButton = document.getElementById('darkModeToggle');
        toggleButton.addEventListener('click', () => {
            document.body.classList.toggle('dark-mode');
            localStorage.setItem('darkMode', document.body.classList.contains('dark-mode'));
        });

        // Load dark mode preference on page load
        if (localStorage.getItem('darkMode') === 'true') {
            document.body.classList.add('dark-mode');
        }
    </script>

</body>

</html>
